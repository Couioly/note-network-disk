### 一、项目整体概述

#### 1. 项目目标

基于微信小程序载体，通过 Python 爬虫接口对接学校教务管理系统，实现学生端的教务信息一站式查询，核心目标：

- 替代网页端教务系统，提升学生查询效率；
- 接口化爬虫降低直接访问教务系统的风险，保证数据稳定性；
- 小程序轻量化设计，适配移动端使用习惯。

#### 2. 项目范围（边界明确）

| 纳入范围           | 排除范围                 |
| -------------- | -------------------- |
| 教务系统账号密码登录     | 教务系统操作类功能（选课、评教）     |
| 个人基本信息查询       | 教师端功能（成绩录入、课表编辑）     |
| 课表（按周 / 学期）查询  | 第三方支付、消息推送（初期版本）     |
| 成绩（按学期 / 课程）查询 | 多校区 / 多学院差异化定制（初期版本） |
| 考试安排查询         | 数据统计 / 分析功能          |
| 登录状态持久化、缓存     | 管理员后台                |

### 二、需求分析（结构化梳理）

#### 1. 功能需求（用户视角）

|模块|子功能|优先级|验收标准|
|---|---|---|---|
|用户登录|账号密码输入|高|支持学号 / 工号 + 密码输入，格式校验|
||记住密码 / 自动登录|中|记住密码可持久化，自动登录有效期 7 天|
||登录状态校验|高|无登录状态自动跳转登录页，token 过期提示|
|信息查询|个人信息展示（姓名 / 专业 / 学号）|高|数据与教务系统一致，加载时间≤2 秒|
||课表查询（切换学期 / 周次）|高|课表按时间段排版，支持下拉刷新|
||成绩查询（筛选学期 / 课程）|高|显示课程名称、分数、学分，支持总分 / 绩点计算|
||考试安排查询|中|显示考试科目、时间、地点、座位号|
|基础能力|数据缓存|中|课表缓存 1 天，成绩缓存 7 天，支持手动清除|
||异常提示|高|网络错误 / 登录失败 / 数据为空时提示友好文案|
|个人中心|退出登录|高|清除本地缓存和登录状态，跳转登录页|
||清除本地缓存|中|可手动清除所有缓存数据|

#### 2. 非功能需求

|类型|具体要求|
|---|---|
|性能|小程序启动时间≤5 秒，接口响应时间≤3 秒；<br><br>单页面切换无明显卡顿|
|兼容性|适配微信小程序基础库≥2.20.0；<br><br>兼容安卓 / IOS 主流版本|
|安全性|密码本地加密存储（如 AES），接口请求带 token 校验；<br><br>禁止明文传输账号密码|
|易用性|核心功能操作步骤≤2 步；<br><br>界面符合微信小程序设计规范，无冗余操作|
|稳定性|爬虫接口容错率≥95%，教务系统维护时给出 “系统维护中” 提示|

### 三、项目阶段规划（时间 + 任务 + 责任人）

#### 1. 项目里程碑

|里程碑|完成时间|核心交付物|
|---|---|---|
|需求确认|D1-D2|需求规格说明书、原型图|
|爬虫接口开发|D3-D7|接口文档、可测试的爬虫接口|
|小程序开发|D8-D15|小程序源码、功能测试用例|
|测试验收|D16-D18|测试报告、修复后的最终版本|
|小程序上线|D19-D20|上线审核通过的小程序、运维手册|

#### 2. 分阶段详细任务规划

##### 阶段 1：需求与准备阶段（D1-D2）

|任务 ID|任务内容|责任人|依赖资源|交付物|
|---|---|---|---|---|
|1.1|对接学校教务系统，梳理接口规则|产品 + 开发|教务系统访问权限、抓包工具|教务系统接口清单|
|1.2|输出小程序原型图（功能布局 / 交互）|产品|微信小程序设计规范|高保真原型图|
|1.3|确认技术选型，输出技术方案|开发|服务器资源、小程序 AppID|技术选型文档|
|1.4|需求评审，确认最终需求范围|全员|原型图、接口清单、技术方案|需求规格说明书（签字确认）|

##### 阶段 2：爬虫接口开发阶段（D3-D7）

|任务 ID|任务内容|责任人|依赖资源|交付物|
|---|---|---|---|---|
|2.1|爬虫核心逻辑开发（登录 / 数据抓取）|后端开发|教务系统接口清单|爬虫核心代码|
|2.2|接口封装（统一返回格式 / 异常处理）|后端开发|爬虫核心代码|标准化接口代码|
|2.3|接口测试（功能 / 异常 / 性能）|测试 + 开发|Postman、测试账号|接口测试报告|
|2.4|接口部署（服务器 / 跨域 / 缓存配置）|运维 + 开发|云服务器、域名、Redis|可公网访问的接口地址|
|2.5|输出接口文档（入参 / 出参 / 调用示例）|后端开发|测试通过的接口|接口文档（Swagger/Markdown）|

##### 阶段 3：小程序开发阶段（D8-D15）

|任务 ID|任务内容|责任人|依赖资源|交付物|
|---|---|---|---|---|
|3.1|小程序项目初始化（配置 / 组件引入）|前端开发|小程序 AppID、Vant 组件库|初始化项目工程|
|3.2|页面开发（登录 / 首页 / 查询页 / 个人中心）|前端开发|原型图、接口文档|小程序页面源码|
|3.3|接口对接（登录 / 数据查询 / 状态校验）|前端开发|公网接口地址|可联调的小程序代码|
|3.4|体验优化（缓存 / 加载状态 / 异常提示）|前端开发|非功能需求文档|优化后的小程序源码|
|3.5|代码走查（规范 / 冗余 / 性能）|前端负责人|开发规范文档|代码走查报告|

##### 阶段 4：测试与上线阶段（D16-D20）

|任务 ID|任务内容|责任人|依赖资源|交付物|
|---|---|---|---|---|
|4.1|功能测试（全覆盖核心场景）|测试|测试用例、多终端设备|功能测试报告|
|4.2|兼容性测试（不同手机 / 微信版本）|测试|测试设备清单|兼容性测试报告|
|4.3|Bug 修复与回归测试|开发 + 测试|测试报告|修复后的最终版本|
|4.4|小程序提审（配置 / 审核材料）|产品 + 开发|微信公众平台账号|提审成功的审核单|
|4.5|上线后验证（功能 / 接口稳定性）|全员|上线后的小程序|上线验证报告|
|4.6|输出运维手册（接口监控 / 问题排查）|运维 + 开发|服务器权限、接口文档|运维手册|

### 四、资源规划

#### 1. 人力资源

|角色|人数|核心职责|
|---|---|---|
|产品负责人|1|需求梳理、原型设计、进度把控|
|后端开发|1|爬虫开发、接口封装、服务器部署|
|前端开发|1|小程序页面开发、接口对接、体验优化|
|测试人员|1|用例设计、功能 / 兼容性测试、Bug 跟踪|
|运维人员|1（兼职）|服务器配置、接口部署、上线后监控|

#### 2. 硬件 / 软件资源

|类型|具体资源|用途|
|---|---|---|
|服务器|轻量云服务器（2 核 4G，带宽≥5M）|部署爬虫接口、Redis 缓存|
|域名 / 备案|国内域名（已备案）|小程序合法域名配置、接口公网访问|
|开发工具|微信开发者工具、抓包工具（Fiddler/Charles）、接口测试工具（Postman）|小程序开发、教务接口分析、接口测试|
|测试资源|安卓 / IOS 手机（不同分辨率）、微信不同版本|兼容性测试|

### 五、风险与应对规划

|风险类型|具体风险点|发生概率|影响程度|应对措施|
|---|---|---|---|---|
|技术风险|教务系统反爬（封 IP / 验证码）|中|高|1. 爬虫请求模拟真人行为（随机 UA / 请求间隔）；<br><br>2. 配置 IP 代理池；<br><br>3. 接口添加降级策略（返回缓存数据）|
|需求风险|教务系统接口变更|中|中|1. 定期巡检教务系统接口；<br><br>2. 接口封装层预留适配空间，变更时仅修改爬虫层|
|上线风险|小程序审核不通过（内容 / 权限问题）|低|高|1. 提前查阅微信小程序审核规范；<br><br>2. 小程序名称 / 内容避免敏感词；<br><br>3. 准备审核申诉材料|
|运维风险|服务器宕机 / 接口响应超时|低|中|1. 配置服务器监控告警；<br><br>2. 核心接口添加超时重试机制；<br><br>3. 小程序端做断网提示|

### 六、项目交付物清单

|交付物类型|具体交付物名称|交付时间|交付形式|
|---|---|---|---|
|需求类|需求规格说明书、原型图|D2|文档 + 图片（Figma / 墨刀）|
|开发类|爬虫接口代码、小程序源码|D7/D15|Git 仓库 / 压缩包|
|文档类|接口文档、运维手册、测试报告|D7/D20|Markdown/PDF|
|产品类|上线后的微信小程序|D20|小程序二维码|

### 总结

这份规划的核心是：

1. **阶段化落地**：按 “需求→接口→小程序→测试→上线” 分阶段推进，每个阶段明确交付物和责任人，避免流程混乱；
2. **风险前置**：提前识别教务系统反爬、接口变更等核心风险，制定应对策略，降低项目延期概率；
3. **边界清晰**：明确纳入 / 排除范围，聚焦 “查询类” 核心功能，优先完成 MVP 版本（最小可行产品），避免需求膨胀导致项目失控。