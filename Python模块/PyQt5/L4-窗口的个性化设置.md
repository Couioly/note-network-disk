>[!note] 
>在PyQt5窗口创建完成后，可以在Qt Designer设计器中通过属性对窗口进行设置，表中列出了PyQt5窗口常用的一些属性及说明。

## PyQt5窗口的常用属性及说明
---

|         **常 用 属 性**         |                               **说    明**                                |
| :-------------------------: | :---------------------------------------------------------------------: |
|         objectName          |                           窗口的唯一标识，程序通过该属性调用窗口                           |
|          geometry           |                            该属性中可以设置窗口的宽度和高度                             |
|         windowTitle         |                                  标题栏文本                                  |
|         windowIcon          |                                窗口的标题栏图标                                 |
|        windowOpacity        |                             窗口的透明度，取值范围为0~1                             |
|       windowModality        |             窗口样式，可选值有NonModal、WindowModal和ApplicationModal              |
|           enabled           |                                 窗口是否可用                                  |
|         mininumSize         |                            窗口最小化时的大小，默认为0×0                             |
|         maximumSize         |                     窗口最大化时的大小，默认为16777215×16777215                      |
|           palette           |                           窗口的调色板，可以用来设置窗口的背景                            |
|            font             |             设置窗口的字体，包括字体名称、字体大小、是否为粗体、是否为斜体、是否有下划线、是否有删除线等              |
|           cursor            |                                 窗口的鼠标样式                                 |
|      contextMenuPolicy      |                                窗口的快捷菜单样式                                |
|         acceptDrops         |                                是否接受拖放操作                                 |
|           toolTip           |                                 窗口的提示文本                                 |
|       toolTipDuration       |                               窗口提示文本的显示间隔                               |
|          statusTip          |                                 窗口的状态提示                                 |
|          whatsThis          |                               窗口的“这是什么”提示                               |
|       layoutDirection       |         窗口的布局方式，可选值有LeftToRight、RightToLeft和LayoutDirectionAuto         |
|     autoFillBackground      |                                是否自动填充背景                                 |
|         styleSheet          |                           设置窗口样式，可以用来设置窗口的背景                            |
|           locale            |                                窗口的国际化设置                                 |
|          iconSize           |                               窗口标题栏图标的大小                                |
|       toolButtonStyle       | 窗口中的工具栏样式，默认值为ToolButtonIconOnly，表示默认工具栏中只显示图标，用户可以更改为只显示文本，或者同时显示文本和图标 |
|         dockOptions         |                                  停靠选项                                   |
| unifiedTitleAndToolBarOnMac |                         在Mac OS系统中是否可以定义标题和工具栏                          |
## 1  基本属性设置
---

窗口包含一些基本的组成要素，包括对象名称、图标、标题、位置和背景等，这些要素可以通过窗口中的`属性编辑器`窗口进行设置，也可以通过代码来实现。下面详细介绍窗口的常见属性设置。

#### 1）设置窗口的对象名称

窗口的对象名称，相当于窗口的标识，是唯一的，在编写代码时，对窗口的任何设置和使用都是通过该名称进行操作的。在Qt Designer设计器中，**窗口的对象名称**是通过`属性编辑器`中的`objectName`属性进行设置的，默认名称为`MainWindow`，如图所示，用户可以根据实际情况进行更改，但要保证在当前窗口中是唯一的。

![[Pasted image 20250827102315.png]]

除了可以在Qt Designer设计器的`属性编辑器`中对其进行修改之外，还可以通过Python代码进行设置，设置时需要使用`setObjectName()函数`，使用方法如下：

```python
MainWindow.setObjectName("MainWindow")
```

#### 2）设置窗口的标题栏名称

在窗口的属性中，通过`windowTitle`属性**设置窗口的标题栏名称**，标题栏名称就是显示在窗口标题上的文本，`windowTitle`属性设置及窗口标题栏的预览效果分别如下图所示。

![[Pasted image 20250827102651.png]]

![[Pasted image 20250827102751.png]]

在Python中使用`setWindowTitle()函数`也可以设置窗口标题栏，代码如下：

```python
MainWindow.setWindowTitle(_translate("MainWindow","标题栏"))
```

#### 3）修改窗口的大小

在窗口的属性中，通过展开`geometry`属性，可以**设置窗口的大小**。修改窗口的大小，只需更改宽度和高度的值即可，如图所示。

![[Pasted image 20250827102955.png]]

>[!info] 说明
>在设置窗口的大小时，其值只能是整数，不能是小数。

在Python中使用`resize()函数`也可以设置窗口的大小，代码如下：

```python
MainWindow.resize(252, 100)
```

>[!tip] 多学两招
>PyQt5窗口运行时，**默认居中显示**在屏幕中，如果想自定义PyQt5窗口的显示位置，可以根据窗口大小和屏幕大小来进行设置。其中，窗口的大小使用`geometry()方法`即可获取，而获取屏幕大小可以使用`QDesktopWidget`类中的`screenGeometry()方法`，`QDesktopWidget`类是PyQt5中提供的一个与屏幕相关的类，其`screenGeometry()方法`用来获取屏幕的大小。例如，下面代码用来获取当前屏幕的大小（包括宽度和高度）：
>```python
>from PyQt5.QtWidgets import QDesktopWidget  # 导入屏幕类  
>screen=QDesktopWidget().screenGeometry()    # 获取屏幕大小  
>width=screen.width()                        # 获取屏幕的宽  
>height=screen.height()                      # 获取屏幕的高
>```

## 2  更换窗口的图标
---

添加一个新的窗口后，窗口的图标是系统默认的QT图标。如果想更换窗口的图标，可以在`属性编辑器`中设置窗口的`windowIcon`属性，窗口的系统默认图标和更换后的新图标如图所示。

![[Pasted image 20250827104048.png]]

更换窗口图标的过程非常简单，具体操作如下：

1）选中窗口，然后在`属性编辑器`中选中`windowIcon`属性，这时会出现下拉按钮，如图所示。

![[Pasted image 20250827103738.png]]

2）单击下拉按钮，在下拉列表中选择`选择文件`菜单项，如图所示。

![[Pasted image 20250827103828.png]]

3）弹出`选择一个像素映射`对话框，该对话框中选择新的图标文件，单击`打开`按钮，即可将选择的图标文件作为窗口的图标，如图所示。

![[Pasted image 20250827103942.png]]

通过上面的方式修改窗口图标后对应的Python代码如下：

```python
icon = QtGui.QIcon()  
icon.addPixmap(QtGui.QPixmap(r"D:\CodeFile\Python_Code\PyQt5\UI\Couioly头像.jpg"), QtGui.QIcon.Normal, QtGui.QIcon.Off)  
MainWindow.setWindowIcon(icon)
```

>[!tip] 多学两招
>通过上面的代码可以看出，在使用选择图标文件的方式设置窗口图标时，使用的是图标的绝对路径，这样做的缺点是，如果其他用户在使用你的程序时，没有上面的路径，就会无法正常显示图标，那么如何解决该问题呢？可以将要使用的图标文件复制到项目的目录下，如图所示。

![[Pasted image 20250827104434.png]]

这时就可以直接通过图标文件名进行使用，上面的代码可以更改为如下：

```python
icon = QtGui.QIcon()    
icon.addPixmap(QtGui.QPixmap("Couioly头像.jpg"), QtGui.QIcon.Normal, QtGui.QIcon.Off)    
MainWindow.setWindowIcon(icon)
```

## 3  设置窗口的背景
---

为了使窗口设计更加得美观，通常会设置窗口的背景样式，在PyQt5中设置窗口的背景有3种常用的方法，下面分别介绍。

#### 1）使用`setStyleSheet()函数`设置窗口背景

在使用`setStyleSheet()函数`设置窗口背景时，需要以`background-color`或者`border-image`的方式来进行设置，其中`background-color`可以设置窗口的背景颜色；而`border-image`可以设置窗口的背景图片。

使用`setStyleSheet()函数`设**置窗口背景颜色**的代码如下：

```python
MainWindow.setStyleSheet("#MainWindow{background-color:red}")
```

运行效果如图所示。

![[Pasted image 20250827104838.png]]

>[!info] 说明
>在使用`setStyleSheet()函数`设置窗口背景色之后，窗口中的**控件会继承窗口的背景色**，如果想要**为控件设置背景图片或者图标**，需要使用`setPixmap()`或者`setIcon()函数`来完成。

在使用`setStyleSheet()函数`**设置窗口背景图片**时，首先需要包括要作为背景的图片文件，因为代码中需要用到图片的路径，这里**将图片文件放在**与`.py`文件**同一目录层级下的images文件夹中**，位置存放位置如图所示。

![[Pasted image 20250827105822.png]]

在存放完图片文件后，接下来就可以使用`setStyleSheet()函数`设置窗口的背景图片了，代码如下：

```python
MainWindow.setStyleSheet("#MainWindow{border-image:url(images/BG哪吒.png)}")  # 设置背景图片
```

运行效果如图所示。

![[Pasted image 20250827110134.png]]

>[!info] 说明
>除了在`setStyleSheet()函数`中使用`border-image`方式设置窗口的背景图片外，还可以使用`background-image`方式设置，但**这种方式设置的背景图片会平铺显示**，代码如下：
>```python
># 设置背景图片  
>MainWindow.setStyleSheet("#MainWindow{background-image:url(images/BG哪吒.png)}")
>```

使用`background-image`方式设置的窗口背景图片效果如图所示。

![[Pasted image 20250827110506.png]]

#### 2）使用`QPalette`设置窗口背景

`QPalette`类是PyQt5中提供的一个调色板，专门用于管理控件的外观显示，每个窗口和控件都包含一个`QPalette`对象。通过`QPalette`对象的`setColor()函数`可以**设置颜色**，而通过该对象的`setBrush()函数`可以**设置图片**，最后使用`MainWindow`对象的`setPalette()函数`即可**为窗口设置背景图片或者背景**。

使用`QPalette`对象为窗口设置背景颜色的代码如下：

```python
MainWindow.setObjectName("MainWindow")  
palette = QtGui.QPalette()  
palette.setColor(QtGui.QPalette.Background, Qt.red)  
MainWindow.setPalette(palette)
```

>[!warning] 注意
>使用`Qt.red`时，需要使用下面的代码导入`Qt`模块：
>```python
>from PyQt5.QtCore import Qt
>```

运行效果与使用`setStyleSheet()函数`设置窗口背景颜色的效果一样，如下图所示。

![[Pasted image 20250827111304.png]]

使用`QPalette`对象为窗口设置背景图片的代码如下：

```python
# 使用QPalette设置窗口背景图片  
palette = QtGui.QPalette()  
palette.setBrush(QtGui.QPalette.Background, QBrush(QPixmap("./images/BG哪吒.png")))  
MainWindow.setPalette(palette)
```

>[!warning] 注意
>在上面代码中用到了`QBrush`和`QPixmap`，因此需要进行导入，代码如下：
>```python
>from PyQt5.QtGui import QBrush,QPixmap
>```

使用`QPalette`对象为窗口设置背景图片的效果如图所示。

![[Pasted image 20250827111658.png]]

>[!tip] 多学两招
>观察上图，会发现背景图片没有显示全，这是因为在使用`QPalette`对象为窗口设置背景图片时，**默认是平铺显示**的，那么如何使背景图片能够自动适应窗口的大小呢？这就需要在设置背景时，对`setBrush()方法`中的`QPixmap`对象参数进行设置，具体设置方法是：在生成`QPixmap`窗口背景图对象参数时，使用`窗口大小`、`QtCore.Qt.IgnoreAspectRatio`值和`QtCore.Qt.SmoothTransformation`值进行设置。关键代码如下：
>```python
># 使用QPalette设置窗口背景图片(自动适应窗口大小)  
palette = QtGui.QPalette()  
palette.setBrush(MainWindow.backgroundRole(), QBrush(QPixmap("./images/BG哪吒.png").scaled(MainWindow.size(), QtCore.Qt.IgnoreAspectRatio,QtCore.Qt.SmoothTransformation)))
>MainWindow.setPalette(palette)
>```

运行程序，效果如图所示，对比上图，可以看到下图中的背景图片自动适应了窗口大小。

![[Pasted image 20250827112506.png]]

#### 3）通过资源文件设置窗口背景

除了以上两种设置窗口背景的方式，PyQt5还推荐使用资源文件的方式对窗口背景进行设置，下面介绍具体的实现过程：

1）在Qt Designer创建并使用资源文件，即在Qt Designer工具中设计程序界面时，可以通过资源浏览器添加图片或图标等资源。

2）在Python的项目路径中创建一个名称为`images`的文件夹，然后将需要测试的图片保存在该文件夹当中，打开Qt Designer工具，在右下角的资源浏览器中单击`编辑资源`的按钮，如图所示。

![[Pasted image 20250827113128.png]]

3）在弹出的`编辑资源`对话框中，单击左下角的第一个`新建资源文件`按钮，如图所示。

![[Pasted image 20250827113217.png]]

4）在`新建资源文件`的对话框中，选择该资源文件保存的路径为当前Python项目的路径，然后设置文件名称为`img`，保存类型为`资源文件（*.qrc）`，最后单击`保存`按钮，如图所示。

![[Pasted image 20250827113520.png]]

5）单击`保存`按钮后，将自动返回至`编辑资源`对话框中，然后在该对话框中选择`添加前缀`按钮，设置前缀为`png`，再单击`添加文件`按钮，如图所示。

![[Pasted image 20250827113910.png]]

6）在`添加文件`的对话框中选择需要添加的图片文件，然后单击`打开`按钮即可，如图所示。

![[Pasted image 20250827114006.png]]

7）图片添加完成以后，将自动返回至`编辑资源`的对话框，在该对话框中直接单击`OK`按钮即可，然后资源浏览器将显示添加的图片资源，如图所示的效果。

![[Pasted image 20250827114306.png]]

>[!info] 说明
>设置的前缀，是自己定义的路径前缀，用于区分不同的资源文件。

8）选中设计窗口，找到`styleSheet`属性，单击右面的三个点按钮，如图所示。

![[Pasted image 20250827114455.png]]

9）接着弹出`编辑样式表`对话框，该对话框中，单击`添加资源`后面的向下箭头，在弹出的菜单中选择`border-image`，如图所示。

![[Pasted image 20250827115417.png]]

10）然后弹出`选择资源`对话框，该对话框中选择创建好的资源，单击`OK`按钮，如图所示。

![[Pasted image 20250827115530.png]]

11）返回`编辑样式表`对话框，在该对话框中可以看到自动生成的代码，单击`OK`按钮即可，如图所示。

![[Pasted image 20250827115613.png]]

12）转换资源文件

在Qt Designer中设计好窗口（该窗口中使用了`.qrc`资源文件）之后，将已经设计好的`.ui`文件转换为`.py`文件，但是转换后的`.py`文件的代码中会显示如图所示的提示信息。

![[Pasted image 20250827115913.png]]

图中的提示信息说明`img_rc`模块导入出现异常，所以此处需要将已经创建好的`img.qrc`资源文件转换为`.py`文件，这样在设计窗口中才可以正常使用，资源文件转换的具体步骤如下：

- 在【[[L1-PyQt5环境搭建]]】中已搭建好资源文件转化工具`Pyrcc`，接下来将使用它进行资源文件转化。

>[!warning] 注意
>选择的`pyrcc5.exe`文件位于Python安装目录下的`Scripts`文件夹中，如果选择当前项目的虚拟环境路径下的`pyrcc5.exe`文件，有可能会出现无法转换资源文件的问题，所以这里一定要注意。

- 转换资源文件的快捷工具创建完成以后，单击鼠标左键选中需要转换的`.qrc`文件，然后在菜单栏中依次单击`Tools` → `External Tools` → `Pyrcc`菜单，即可在`.qrc`文件的下面自动生成对应的`.py`文件，如图所示。

![[Pasted image 20250827121213.png]]

- 文件转换完以后，提示的报错信息即可消失，然后添加程序入口，并在其中通过`MainWindow`对象的`show()函数`来显示主窗口，运行效果如图。

![[Pasted image 20250827121454.png]]

## 4  控制窗口透明度
---

窗口透明度是窗口相对于其他界面的透明显示度，默认为不透明，将窗口透明度设置为0.5则可以成为半透明，对比效果如图所示。

![[Pasted image 20250827135243.png]]

控制窗口透明度的具体操作如下：

选中窗口，然后在`属性编辑器`中设置`windowOpacity`属性的值即可，如图所示。

![[Pasted image 20250827135515.png]]

>[!info] 说明
>`windowOpacity`属性的值为`0~1`之间的数，其中，`0`表示完全透明；`1`表示完全不透明。

在Python代码中使用`setWindowOpacity()函数`也可以设置窗口的透明度，例如，下面的代码将窗口的透明度设置为半透明：

```python
MainWindow.setWindowOpacity(0.5)
```

## 5  设置窗口样式
---

在PyQt5中，使用`setWindowFlags()函数`设置窗口的样式，该函数的语法如下：

```python
setWindowFlags(Qt.WindowFlags)
```

`Qt.WindowFlags`参数表示要设置的窗口样式，它的取值分为两种类型，分别如下：

- PyQt5的基本窗口类型及说明，如表所示。

|   **参  数  值**   |     **说    明**     |
| :-------------: | :----------------: |
|    Qt.Widget    | 默认窗口，有最大化、最小化和关闭按钮 |
|    Qt.Window    | 普通窗口，有最大化、最小化和关闭按钮 |
|    Qt.Dialog    | 对话框窗口，有问号（？）和关闭按钮  |
|    Qt.Popup     |      无边框的弹出窗口      |
|   Qt.ToolTip    |   无边框的提示窗口，没有任务栏   |
| Qt.SplashScreen |   无边框的闪屏窗口，没有任务栏   |
|  Qt.SubWindow   |  子窗口，窗口没有按钮，但有标题   |

例如，下面代码用来将名称为`MainWindow`的窗口设置为一个对话框窗口：

```python
# 显示一个有问号（?）和关闭按钮的对话框  
MainWindow.setWindowFlags(QtCore.Qt.Dialog)
```

- 自定义顶层窗口外观及说明，如表所示。

|           **参  数  值**           |       **说    明**       |
| :-----------------------------: | :--------------------: |
| Qt.MSWindowsFixedSizeDialogHint |       无法调整大小的窗口        |
|     Qt.FramelessWindowHint      |         无边框窗口          |
|     Qt.CustomizeWindowHint      | 有边框但无标题栏和按钮，不能移动和拖动的窗口 |
|       Qt.WindowTitleHint        |    添加标题栏和一个关闭按钮的窗口     |
|     Qt.WindowSystemMenuHint     |    添加系统目录和一个关闭按钮的窗口    |
|   Qt.WindowMaximizeButtonHint   |       激活最大化按钮的窗口       |
|   Qt.WindowMinimizeButtonHint   |       激活最小化按钮的窗口       |
|   Qt.WindowMinMaxButtonsHint    |     激活最小化和最大化按钮的窗口     |
|    Qt.WindowCloseButtonHint     |      添加一个关闭按钮的窗口       |
| Qt.WindowContextHelpButtonHint  |  添加像对话框一样的问号（？）和关闭按钮   |
|     Qt.WindowStaysOnTopHint     |      使窗口始终处于顶层位置       |
|   Qt.WindowStaysOnBottomHint    |      使窗口始终处于底层位置       |

例如，下面代码用来设置名称为`MainWindow`的窗口**只有关闭按钮**，而没有最大化、最小化按钮：

```python
MainWindow.setWindowFlags(QtCore.Qt.WindowCloseButtonHint)  # 只显示关闭按钮
```

将窗口设置为对话框窗口和只有关闭按钮的窗口的效果如下图所示。

![[Pasted image 20250827141328.png]]

>[!warning] 注意
>对窗口样式的设置，需要在初始化窗体之后才会起作用，即需要将设置窗口样式的代码放在`setupUi()函数`之后执行，例如：
>```python
>MainWindow = QtWidgets.QMainWindow()    # 创建窗体对象  
ui = Ui_MainWindow()            # 创建PyQt设计的窗体对象  
ui.setupUi(MainWindow)          # 调用PyQt窗体的方法对窗体对象进行初始化设置  
MainWindow.setWindowFlags(QtCore.Qt.WindowCloseButtonHint)# 只显示关闭按钮
>```

